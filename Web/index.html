<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Swift WebAssembly</title>
  </head>
  <body>
    <script type="module">
      const javaScriptKit = await import("/javascript-kit/index.mjs")
      const swift = new javaScriptKit.SwiftRuntime()

      const decoder = new TextDecoder()
      const importObject = {
        javascript_kit: swift.wasmImports
      }
      const { instance, module } = await WebAssembly.instantiateStreaming(
        fetch("app.wasm"), 
        importObject
      )
      swift.setInstance(instance)
      swift.main()
      instance.exports.run()
    </script>
  </body>
</html>
